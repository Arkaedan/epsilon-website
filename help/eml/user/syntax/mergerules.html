<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="../../../common/css/style.css" charset="ISO-8859-1" type="text/css"><title>Transformation rules</title>

</head>

<body>
<h2>Merge rules</h2>
 A merge rule
defines a unique name, a two source types from the left and right model (following the <code>merge</code>
and <code>with</code> keywords respectively) and many target (following the <code>into</code>
keyword) parameters.
Moreover, a rule can extend other rules specified after the <code>extends</code>
keyword. Each rule can specify
a <code>guard</code> which is a block of EOL statements
that returns a <code>Boolean</code>
value to further limit
its scope. The body of a rule is a block of EOL statements through
which the user can modify the contents of the target elements, create
other elements as well (using the new keyword). Finally, a rule can be
declared as <code>abstract</code> which means that it will
not be executed unless it is extended by one or more concrete rules
and/or as&nbsp;<code>auto</code> which means that the
rule will invoke the behavior of the strategy first and then its body. <br>
<h3>Rule Inheritance</h3>
When a rule <code>B</code> extends a rule <code>A</code>, when invoking <code>B</code>, the body of <code>A</code> will be
first invoked followed by the body of <code>B</code>. The target parameters of <code>A</code> must be a subset of the target parameters of <code>B</code><br>
<h3>Strategies</h3>

<p>EML supports pluggable strategies to automate common scenarios without
  needing to specify a large number of trivial rules. For example, in the
  context of a merging models of the same metamodel, the target model is usually a
  union of the source models. When a strategy is defined,
  the auto keyword is used to indicate that the rule complements the
strategy while its absence shows that the rule overrides the strategy. More specifically, in an EML module, 4 strategies can be defined:</p>
<ul>
	<li><a href="../../../ecl/user/syntax/strategies.html">Matching strategy</a>
    <li><a href="strategies.html">Merging strategy</a>
    <li><a href="../../../etl/user/syntax/strategies.html">Transformation strategy</a> (for the left model)
    <li><a href="../../../etl/user/syntax/strategies.html">Transformation strategy</a> (for the right model)
</ul>
<p>As with match and transform rules, matching and transformation strategies are inherited from ECL and ETL respectively. </p>
<h3>Invoking other rules</h3>

From the body of a merge rule, it is often required to
reference the result of another merge or transformation rule. This is achieved
using the <code>equivalent()</code> and <code>equivalents()</code>
built-in EML operations. The
<code>equivalents()</code> operation returns a collection
of the source element
equivalents in the target model while the <code>equivalent()</code>
operation
returns the first equivalent element only (i.e. <code>equivalents().first()</code>).
<h3>Syntax</h3>
<code>
(<b><font color="#7f0055">auto</font></b>)?&nbsp;(<b><font color="#7f0055">abstract</font></b>)?&nbsp;<b><font color="#7f0055">rule</font></b>&nbsp;ruleName<br>
&nbsp;&nbsp;<b><font color="#7f0055">merge</font></b>&nbsp;leftName&nbsp;:&nbsp;LeftType<br>
&nbsp;&nbsp;<b><font color="#7f0055">with</font></b>&nbsp;rightName&nbsp;:&nbsp;RightType<br>
&nbsp;&nbsp;<b><font color="#7f0055">into</font></b>&nbsp;targetName&nbsp;:&nbsp;TargetType&nbsp;(,&nbsp;targetName
: TargetType)*<br>
&nbsp;&nbsp;(<b><font color="#7f0055">extends</font></b>&nbsp;otherRuleName&nbsp;(,&nbsp;otherRuleName)*&nbsp;)?&nbsp;{<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;(<b><font color="#7f0055">guard</font></b>&nbsp;<a href="../../../general/syntaxabbreviations.html">blockOrExpression</a>)?<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;<a href="../../../general/syntaxabbreviations.html">block</a><br>
}<br>
</code>
<h3>Examples</h3>
<h3><br>
</h3>
</body></html>