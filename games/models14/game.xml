<?xml version="1.0"?>
<game name="The MoDELS'14 Game" 
	metamodel="http://www.eclipse.org/epsilon/games/models14/conference.ecore" 
	model="http://www.eclipse.org/epsilon/games/models14/models14.model"
	emfatic="http://www.eclipse.org/epsilon/games/models14/conference.emf"
	emfatic1="http://localhost/epsilon/games/models14/conference.emf"
	version="1">
	
	<description>
	Use the Model Explorer to query the secret MoDELS'14 model with EOL, answer the questions on the right and discover interesting facts about the conference!
	</description>
	
	<level id="1">
		<description>
		Let's start with the basics.
		</description>
		<question>
		How many papers were accepted this year?
		</question>
		<hint>
// We'll give you this one
Paper.all.size().println();
		</hint>
		<solution>
// We'll give you this one
Paper.all.size().println();
		</solution>
		<answer>47</answer>
	</level>
	<level id="2">
		<description>
		Each paper has one or more authors.
		</description>
		<question>
		How many authors were involved, in total, in accepted papers?
		</question>
		<hint>
// Replace ? with something more meaningful
// and then click on the magnifying glass.
// The metamodel on the right should help.
?.all.size().println();
		</hint>
		<solution>
Author.all.size().println();		
		</solution>
		<answer>153</answer>
	</level>
	<level id="3">
		<description>The conference has 2 tracks: Applications and Foundations.</description>
		<question>How many papers were accepted in the Applications track?</question>
		<hint>
var applicationsTrack = 
	Track.all.selectOne(t | t.name = "Applications");

applicationsTrack.?.size().println();	
		</hint>
		<solution>
var applicationsTrack = 
	Track.all.selectOne(t | t.name = "Applications");
	
applicationsTrack.papers.size().println();		
		</solution>
		<answer>13</answer>
	</level>
	<level id="4">
		<description>MoDELS'13 brings together MDE researchers from across the globe.</description>
		<question>How many different countries do authors come from?</question>
		<hint>
Author.all.collect(a|a.?).asSet().size().println();
		</hint>
		<solution>
Author.all.collect(a|a.country).asSet().size().println();				
		</solution>
		<answer>27</answer>
	</level>
	<level id="5">
		<description>Some papers need more than a couple of people to write.</description>
		<question>How many papers have 5 of more authors?</question>
		<hint>
Paper.all.select(p | p.?.size() >= ?).size().println();		
		</hint>
		<solution>
Paper.all.select(p | p.authors.size() >= 5).size().println();		
		</solution>
		<answer>10</answer>
	</level>
	<level id="6">
		<description>On the other end of the spectrum, there are also monographs.</description>
		<question>How many papers have only 1 author?</question>
		<hint>
Paper.?.select(p | p.?.?() == 1).size().println();
		</hint>
		<solution>
Paper.all.select(p | p.authors.size() == 1).size().println();
		</solution>		
		<answer>1</answer>
	</level>
	<level id="7">
		<description>So there is exactly one monograph.</description>
		<question>What is the title of this monograph?</question>
		<hint>
var monograph = Paper.all.selectOne(p|p.?.size() == 1);
monograph.?.println();	
		</hint>
		<solution>
var monograph = Paper.all.selectOne(p|p.authors.size() == 1);
monograph.title.println();	
		</solution>
		<answer>Towards the Notation-Driven Development of DSMLs</answer>
	</level>
	<level id="8">
		<description>MDE is clearly more popular in some countries.</description>
		<question>Which country had the most authors of accepted papers?</question>
		<hint>
var countries = Author.all.collect(a | a.?).asSet();
countries.sortBy(c| -getAuthorsFrom(?)).first().println();

operation getAuthorsFrom(country : String) {
	return Author.?.select(a|a.country = ?);
}
		</hint>
		<solution>
var countries = Author.all.collect(a | a.country).asSet();
countries.sortBy(c| -getAuthorsFrom(c)).first().println();

operation getAuthorsFrom(country : String) {
	return Author.all.select(a|a.country = country);
}
		</solution>
		<answer>Germany</answer>
	</level>
	<level id="9">
		<description>Let's talk about our hosts.</description>
		<question>How many papers have at least one author from the United States?</question>
		<hint>
Paper.?.select(p|p.hasAuthorFrom("United States"))
	.size().println();

operation Paper hasAuthorFrom(country : String) {
  return self.?.exists(a | a.? = ?);
}
		</hint>
		<solution>
Paper.all.select(p|p.hasAuthorFrom("United States"))
	.size().println();

operation Paper hasAuthorFrom(country : String) {
  return self.authors.exists(a | a.country = country);
}
		</solution>
		<answer>7</answer>
	</level>
	<level id="10">
		<description>Finally, let's find out who has topped this year's MoDELS.</description>
		<question>Which person has co-authored the most accepted papers this year and is also celebrating his birthday during the conference?</question>
		<hint>
Author.all.sortBy(a | -a.getPapers().size()).
	first().?.println();

operation Author getPapers() {
  return Paper.?.select(p | p.?.includes(self));
}
		</hint>
		<solution>
Author.all.sortBy(a | -a.getPapers().size()).
	first.name.println();

operation Author getPapers() {
  return Paper.all.select(p | p.authors.includes(self));
}
		</solution>
		<answer>Robert France</answer>
	</level>
</game>