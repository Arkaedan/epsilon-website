<?xml version="1.0"?>
<game name="The MoDELS'13 Game" 
	metamodel="http://www.eclipse.org/epsilon/games/models13/conference.ecore" 
	model="http://www.eclipse.org/epsilon/games/models13/models13.model"
	emfatic="http://www.eclipse.org/epsilon/games/models13/conference.emf"
	emfatic1="http://localhost/epsilon/games/models13/conference.emf"
	version="10">
	
	<description>
	<!--It's a cold winter night in Villa Emfatica. A group of people is scattered across the rooms of the villa but not all of them are alive. 
	The solution to the mystery hides in a model that conforms to the metamodel below. As you progress through the levels of the game, 
	more details of the metamodel will be revealed to you.--> Use the Model Explorer to query the MoDELS'13 model with EOL, answer the questions on the right and discover interesting-ish facts about the conference!
	</description>
	
	<level id="1">
		<description>
		Let's start with the basics.
		</description>
		<question>
		How many papers have been accepted in the conference?
		</question>
		<hint>
// We'll give you this one
Paper.all.size().println();
		</hint>
		<solution>
// We'll give you this one
Paper.all.size().println();
		</solution>
		<answer>47</answer>
	</level>
	<level id="2">
		<description>
		Each paper has one or more authors.
		</description>
		<question>
		How many authors were involved in total in accepted papers?
		</question>
		<hint>
?.all.size().println();
		</hint>
		<solution>
Author.all.size().println();		
		</solution>
		<answer>153</answer>
	</level>
	<level id="3">
		<description>The conference has 2 tracks: Applications and Foundations.</description>
		<question>How many papers were accepted in the Applications track?</question>
		<hint>
var applicationsTrack = 
	Track.all.selectOne(t | t.name = "Applications");
	
applicationsTrack.?.size().println();	
		</hint>
		<solution>
var applicationsTrack = 
	Track.all.selectOne(t | t.name = "Applications");
	
applicationsTrack.papers.size().println();		
		</solution>
		<answer>13</answer>
	</level>
	<level id="4">
		<description>MoDELS'13 brings together MDE researchers from across the globe.</description>
		<question>How many different countries do authors come from?</question>
		<hint>
Author.all.collect(a|a.?).asSet().size().println();		
		</hint>
		<solution>
Author.all.collect(a|a.country).asSet().size().println();				
		</solution>
		<answer>27</answer>
	</level>
	<level id="5">
		<description>Some papers need more than a couple people to write.</description>
		<question>How many papers have 5 of more authors?</question>
		<hint>
Paper.all.select(p | p.?.size() >= ?).size().println();		
		</hint>
		<solution>
Paper.all.select(p | p.authors.size() >= 5).size().println();		
		</solution>
		<answer>10</answer>
	</level>
	<level id="6">
		<description>On the other end of the spectrum, there are also monographs.</description>
		<question>How many papers have only 1 author?</question>
		<hint>
Paper.?.select(p | p.?.?() == 1).size().println();
		</hint>
		<solution>
Paper.all.select(p | p.authors.size() == 1).size().println();
		</solution>		
		<answer>1</answer>
	</level>
	<level id="7">
		<description>So there is exactly one monograph.</description>
		<question>What is the title of the monograph?</question>
		<hint>
var monograph = Paper.all.selectOne(p|p.?.size() == 1);
monograph.?.println();	
		</hint>
		<solution>
var monograph = Paper.all.selectOne(p|p.authors.size() == 1);
monograph.title.println();	
		</solution>
		<answer>Towards the Notation-Driven Development of DSMLs</answer>
	</level>
	<level id="8">
		<description>Before we close, let's talk about our hosts.</description>
		<question>How many papers have at least one author from the United States?</question>
		<hint>
Paper.?.select(p|p.hasAuthorFrom("United States"))
	.size().println();

operation Paper hasAuthorFrom(country : String) {
  return self.?.exists(a | a.? = ?);
}
		</hint>
		<solution>
Paper.all.select(p|p.hasAuthorFrom("United States"))
	.size().println();

operation Paper hasAuthorFrom(country : String) {
  return self.authors.exists(a | a.country = country);
}
		</solution>
		<answer>7</answer>
	</level>
	<!--level id="9">
		<description>The murder weapon is in a room empty of people.</description>
		<question>Which object is the murder weapon?</question>
		<hint>
for (room in ?.all.select(r|r.?.size() = 0)) {
    for (object in room.?) {
    	object.?.println();
    }
}
		</hint>
		<solution>
for (room in Room.all.select(r|r.people.size() = 0)) {
    for (object in room.objects) {
    	object.name.println();
    }
}
		</solution>
		<answer>Knife</answer>
	</level>
	<level id="10">
		<description>The murderer is in a room without any suspicious objects.</description>
		<question>How many suspects does this leave us with?</question>
		<hint>
for (room in ?.all.select(r|r.objects.?() = 0)) {
    for (person in ?.people) {
    	person.?.println();
    }
}
// Remember that James is not the murderer (Level 6)
		</hint>
		<solution>
for (room in Room.all.select(r|r.objects.size() = 0)) {
    for (person in room.people) {
    	person.name.println();
    }
}
// Remember that James is not the murderer (Level 6)
		</solution>
		<answer>2</answer>
	</level>
	<level id="11">
		<description>The murderer is younger than 30 years old.</description>
		<question>Who is the murderer?</question>
		<hint>
<![CDATA[
for (room in ?.all.select(room|room.objects.size() = 0)) {
    for (person in room.?) {
    	if (person.? <> "James" and person.? < 30) {
    		?.name.println();
    	}
    }
}
]]>
		</hint>
		<solution>
<![CDATA[
for (room in Room.all.select(room|room.objects.size() = 0)) {
    for (person in room.people) {
    	if (person.name <> "James" and person.age < 30) {
    		person.name.println();
    	}
    }
}
]]>
		</solution>
		<answer>Tony</answer>
	</level-->
</game>